{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\n\nvar Writable = require('readable-stream').Writable\nvar inherits = require('inherits')\n\nfunction CallbackStream (options, callback) {\n  if (!(this instanceof CallbackStream)) {\n    return new CallbackStream(options, callback)\n  }\n\n  if (typeof options === 'function') {\n    callback = options\n    options = {}\n  }\n\n  Writable.call(this, options)\n\n  this.results = []\n  this.callback = callback\n\n  this.on('finish', deliversCallback)\n  this.once('pipe', handlePipe)\n}\n\nfunction deliversCallback () {\n  this.callback(null, this.results)\n}\n\nfunction handlePipe (source) {\n  source.on('error', this.callback)\n}\n\ninherits(CallbackStream, Writable)\n\nCallbackStream.prototype._write = function (data, encoding, done) {\n  this.results.push(data)\n  done()\n}\n\nCallbackStream.obj = function (options, callback) {\n  if (typeof options === 'function') {\n    callback = options\n    options = {}\n  }\n\n  options.objectMode = true\n\n  return new CallbackStream(options, callback)\n}\n\nmodule.exports = CallbackStream\n"]}